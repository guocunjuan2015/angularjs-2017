!function(){var a=Array.prototype,b=Object.prototype,c=a.slice,d=b.toString,e=b.hasOwnProperty,f=window.console,g=window.navigator,h=window.document,i=g.userAgent,j={},k="1.2.1",l="https://",m=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,n=!1,o={api_host:l+"apipool.zhugeio.com/web_event/?method=web_event_srv.upload",debug:!1,ping:!1,ping_interval:12e3,idle_timeout:3e5,idle_threshold:1e4,track_link_timeout:300,cookie_expire_days:365,cookie_cross_subdomain:!0,cookie_secure:!1,info_upload_interval_days:7,session_interval_mins:30,app_channel:"web",app_version:"1.0"};!function(){var b=a.forEach,f=Array.isArray,g={};j.each=function(a,c,d){if(null!=a)if(b&&a.forEach===b)a.forEach(c,d);else if(a.length===+a.length){for(var f=0,h=a.length;h>f;f++)if(f in a&&c.call(d,a[f],f,a)===g)return}else for(var i in a)if(e.call(a,i)&&c.call(d,a[i],i,a)===g)return},j.extend=function(a){return j.each(c.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},j.isUndefined=function(a){return void 0===a},j.isString=function(a){return"[object String]"==d.call(a)},j.isArray=f||function(a){return"[object Array]"===d.call(a)},j.isFunction=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return!1}},j.isObject=function(a){return a===Object(a)&&!j.isArray(a)},j.includes=function(a,b){return-1!==a.indexOf(b)}}(),j.truncate=function(a,b){var c;return"string"==typeof a?c=a.slice(0,b):j.isArray(a)?(c=[],j.each(a,function(a){c.push(j.truncate(a,b))})):j.isObject(a)?(c={},j.each(a,function(a,d){c[d]=j.truncate(a,b)})):c=a,c},j.strip_empty_properties=function(a){var b={};return j.each(a,function(a,c){j.isString(a)&&a.length>0&&(b[c]=a)}),b},j.JSONEncode=function(){return function(a){var b=a,c=function(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return b.lastIndex=0,b.test(a)?'"'+a.replace(b,function(a){var b=c[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},f=function(a,b){var g="",h="    ",i=0,j="",k="",l=0,m=g,n=[],o=b[a];switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(a)),typeof o){case"string":return c(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(g+=h,n=[],"[object Array]"===d.apply(o)){for(l=o.length,i=0;l>i;i+=1)n[i]=f(i,o)||"null";return k=0===n.length?"[]":g?"[\n"+g+n.join(",\n"+g)+"\n"+m+"]":"["+n.join(",")+"]",g=m,k}for(j in o)e.call(o,j)&&(k=f(j,o),k&&n.push(c(j)+(g?": ":":")+k));return k=0===n.length?"{}":g?"{"+n.join(",")+m+"}":"{"+n.join(",")+"}",g=m,k}};return f("",{"":b})}}(),j.JSONDecode=function(){var a,b,c,d,e={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},f=function(b){throw{name:"SyntaxError",message:b,at:a,text:c}},g=function(d){return d&&d!==b&&f("Expected '"+d+"' instead of '"+b+"'"),b=c.charAt(a),a+=1,b},h=function(){var a,c="";for("-"===b&&(c="-",g("-"));b>="0"&&"9">=b;)c+=b,g();if("."===b)for(c+=".";g()&&b>="0"&&"9">=b;)c+=b;if("e"===b||"E"===b)for(c+=b,g(),("-"===b||"+"===b)&&(c+=b,g());b>="0"&&"9">=b;)c+=b,g();return a=+c,isFinite(a)?a:void f("Bad number")},i=function(){var a,c,d,h="";if('"'===b)for(;g();){if('"'===b)return g(),h;if("\\"===b)if(g(),"u"===b){for(d=0,c=0;4>c&&(a=parseInt(g(),16),isFinite(a));c+=1)d=16*d+a;h+=String.fromCharCode(d)}else{if("string"!=typeof e[b])break;h+=e[b]}else h+=b}f("Bad string")},j=function(){for(;b&&" ">=b;)g()},k=function(){switch(b){case"t":return g("t"),g("r"),g("u"),g("e"),!0;case"f":return g("f"),g("a"),g("l"),g("s"),g("e"),!1;case"n":return g("n"),g("u"),g("l"),g("l"),null}f("Unexpected '"+b+"'")},l=function(){var a=[];if("["===b){if(g("["),j(),"]"===b)return g("]"),a;for(;b;){if(a.push(d()),j(),"]"===b)return g("]"),a;g(","),j()}}f("Bad array")},m=function(){var a,c={};if("{"===b){if(g("{"),j(),"}"===b)return g("}"),c;for(;b;){if(a=i(),j(),g(":"),Object.hasOwnProperty.call(c,a)&&f('Duplicate key "'+a+'"'),c[a]=d(),j(),"}"===b)return g("}"),c;g(","),j()}}f("Bad object")};return d=function(){switch(j(),b){case"{":return m();case"[":return l();case'"':return i();case"-":return h();default:return b>="0"&&"9">=b?h():k()}},function(e){var g;return c=e,a=0,b=" ",g=d(),j(),b&&f("Syntax error"),g}}(),j.HTTPBuildQuery=function(a,b){var c,d,e=[];return"undefined"==typeof b&&(b="&"),j.each(a,function(a,b){c=encodeURIComponent(a.toString()),d=encodeURIComponent(b),e[e.length]=d+"="+c}),e.join(b)},j.getQueryParam=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&#]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")},j.register_event=function(){function a(a,c,d){var e=function(e){if(e=e||b(window.event),!e)return void 0;var f,g,h=!0;return j.isFunction(d)&&(f=d(e)),g=c.call(a,e),(!1===f||!1===g)&&(h=!1),h};return e}function b(a){return a&&(a.preventDefault=b.preventDefault,a.stopPropagation=b.stopPropagation),a}var c=function(b,c,d,e){if(!b)return void p.error("No valid element provided to register_event");if(b.addEventListener&&!e)b.addEventListener(c,d,!1);else{var f="on"+c,g=b[f];b[f]=a(b,d,g)}};return b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0},c}(),j.cookie={get:function(a){for(var b=a+"=",c=h.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return null},parse:function(a){var b;try{b=j.JSONDecode(j.cookie.get(a))||{}}catch(c){}return b},set:function(a,b,c,d,e){var f="",g="",i="";if(d){var j=h.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),k=j?j[0]:"";f=k?"; domain=."+k:""}if(c){var l=new Date;l.setTime(l.getTime()+24*c*60*60*1e3),g="; expires="+l.toGMTString()}e&&(i="; secure"),h.cookie=a+"="+encodeURIComponent(b)+g+"; path=/"+f+i},remove:function(a,b){j.cookie.set(a,"",-1,b)}},j.UUID=function(){var a=function(){for(var a=1*new Date,b=0;a==1*new Date;)b++;return a.toString(16)+b.toString(16)},b=function(){return Math.random().toString(16).replace(".","")},c=function(a){function b(a,b){var c,d=0;for(c=0;c<b.length;c++)d|=f[c]<<8*c;return a^d}var c,d,e=i,f=[],g=0;for(c=0;c<e.length;c++)d=e.charCodeAt(c),f.unshift(255&d),f.length>=4&&(g=b(g,f),f=[]);return f.length>0&&(g=b(g,f)),g.toString(16)};return function(){var d=(screen.height*screen.width).toString(16);return a()+"-"+b()+"-"+c()+"-"+d+"-"+a()}}(),j.info={campaignParams:function(){var a="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),b="",c={};return j.each(a,function(a){b=j.getQueryParam(h.URL,a),b.length&&(c[a]=b)}),c},searchEngine:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)baidu.com")?"baidu":0===a.search("https?://(.*)sogou.com")?"sogou":0===a.search("https?://(.*)haosou.com")?"haosou":null},searchKeyword:function(a){var b=j.info.searchEngine(a);return"google"==b?j.getQueryParam(a,"q"):"baidu"==b?j.getQueryParam(a,"wd"):"sogou"==b?j.getQueryParam(a,"query"):"haosou"==b?j.getQueryParam(a,"q"):null},referringDomain:function(a){var b=a.split("/");return b.length>=3?b[2]:""},browser:function(a,b,c){var b=b||"";return c?j.includes(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":j.includes(a,"FBIOS")?"Facebook Mobile":j.includes(a,"Chrome")?"Chrome":j.includes(a,"CriOS")?"Chrome iOS":j.includes(b,"Apple")?j.includes(a,"Mobile")?"Mobile Safari":"Safari":j.includes(a,"Android")?"Android Mobile":j.includes(a,"Konqueror")?"Konqueror":j.includes(a,"Firefox")?"Firefox":j.includes(a,"MSIE")||j.includes(a,"Trident/")?"Internet Explorer":j.includes(a,"Gecko")?"Mozilla":""},os:function(){var a=i;return/Windows/i.test(a)?/Phone/.test(a)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(a)?"iOS":/Android/.test(a)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Mac/i.test(a)?"Mac OS X":/Linux/.test(a)?"Linux":""},device:function(a){return/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Windows Phone/i.test(a)?"Windows Phone":/Android/.test(a)?"Android":""},resolution:function(){return screen.width+"*"+screen.height},properties:function(){var a=h.referrer,b=location.search.split("zhuge_referrer=")[1];return a=b?decodeURIComponent(b):a,j.strip_empty_properties({os:j.info.os(),br:j.info.browser(i,g.vendor,window.opera),dv:j.info.device(i),rs:j.info.resolution(),search:j.info.searchEngine(a),keyword:j.info.searchKeyword(a),url:h.URL,referrer:a,referrer_domain:j.info.referringDomain(a)})}};var p={log:function(){if(n&&!j.isUndefined(f)&&f)try{f.log.apply(f,arguments)}catch(a){j.each(arguments,function(a){f.log(a)})}},error:function(){if(n&&!j.isUndefined(f)&&f){var a=["Zhuge error:"].concat(j.toArray(arguments));try{f.error.apply(f,a)}catch(b){j.each(a,function(a){f.error(a)})}}}},q=function(a){this.name="_zg",this.props={},this.config=j.extend({},a),this.load()};q.prototype.load=function(){var a=j.cookie.parse(this.name);a&&(this.props=j.extend({},a))},q.prototype.save=function(){j.cookie.set(this.name,j.JSONEncode(this.props),this.config.cookie_expire_days,this.config.cookie_cross_subdomain,this.config.cookie_secure)},q.prototype.register_once=function(a,b){return j.isObject(a)?("undefined"==typeof b&&(b="None"),j.each(a,function(a,c){this.props[c]&&this.props[c]!==b||(this.props[c]=a)},this),this.save(),!0):!1},q.prototype.register=function(a){return j.isObject(a)?(j.extend(this.props,a),this.save(),!0):!1};var r=function(){this.config={},j.extend(this.config,o),this.idle=0,this.last_activity=new Date};r.prototype._init=function(a,b){this._key=a,this._jsc=function(){},j.isObject(b)&&(j.extend(this.config,b),n=n||this.config.debug),this.cookie=new q(this.config),this.cookie.register_once({uuid:j.UUID(),sid:0,updated:0,info:0},""),this._session(),this._info(),this._startPing()},r.prototype._session=function(){var a=this.cookie.props.updated,b=this.cookie.props.sid,c=1*new Date/1e3;if(0==b||c>a+60*this.config.session_interval_mins){if(b>0&&a>0){var d={};d.et="se",d.sid=b,d.dr=Math.round(1e3*(a-b))/1e3,this._batchTrack(d)}b=c;var e={};e.et="ss",e.sid=b,e.cn=this.config.app_channel,e.vn=this.config.app_version,e.pr=j.extend(j.info.properties(),j.info.campaignParams()),this._batchTrack(e),this.cookie.register({sid:b},"")}this.cookie.register({updated:c},"")},r.prototype._info=function(){var a=this.cookie.props.info,b=1*new Date;if(b>a+24*this.config.info_upload_interval_days*60*60*1e3){var c={};c.et="info",c.pr=j.extend(j.info.properties(),{cn:this.config.app_channel,vn:this.config.app_version}),this._batchTrack(c),this.cookie.register({info:b},"")}},r.prototype.debug=function(a){n=a},r.prototype.identify=function(a,b,c){this.cookie.register({cuid:a},""),this._session();var d={};d.et="idf",d.cuid=a,d.pr=b,d.sid=this.cookie.props.sid,this._batchTrack(d,c)},r.prototype.page=function(a,b){this._session();var c=h.location.href,d={};d.et="pg",d.pid=c,d.pn="undefined"==typeof a?c:a,d.tl=h.title,d.ref=h.referrer,d.sid=this.cookie.props.sid,this._batchTrack(d,b)},r.prototype.track=function(a,b,c,d){if(d){this._session();var e={};e.et="cus",e.eid=a,e.pr=b,e.ts=(d?d:new Date).getTime()/1e3,e.sid=this.cookie.props.sid,this._omitPatchTrack(e,d,c)}else{this._session();var e={};e.et="cus",e.eid=a,e.pr=b,e.ts=(new Date).getTime()/1e3,e.sid=this.cookie.props.sid,this._batchTrack(e,c)}},r.prototype.trackLink=function(a,b,c){if(!a)return this;j.isArray(a)||(a=[a]);var d=this;return j.each(a,function(a){var e=function(e){d.track(b,c),a.href&&"_blank"!==a.target&&!e.metaKey&&2!==e.which&&(e.preventDefault(),window.setTimeout(function(){window.location.href=a.href},this.config.track_link_timeout))};j.register_event(a,"click",e)}),this},r.prototype.trackForm=function(a,b,c){if(!a)return this;j.isArray(a)||(a=[a]);var d=this;return j.each(a,function(a){var e=function(e){e.preventDefault(),d.track(b,c),window.setTimeout(function(){a.submit()},TRACK_LINK_TIMEOUT)},f=window.jQuery||window.Zepto;f?f(a).submit(e):j.register_event(a,"submit",e)}),this},r.prototype._moved=function(a){this.last_activity=new Date,this.idle=0},r.prototype._startPing=function(){var a=this;j.register_event(window,"mousemove",function(){a._moved.apply(a,arguments)}),"undefined"==typeof this.pingInterval&&(this.pingInterval=window.setInterval(function(){a._ping()},this.config.ping_interval))},r.prototype._stopPing=function(){"undefined"!=typeof this.pingInterval&&(window.clearInterval(this.pingInterval),delete this.pingInterval)},r.prototype._ping=function(){if(this.config.ping&&this.idle<this.config.idle_timeout){var a={};a.type="ping",a.sdk="web",a.sdkv=k,a.ak=this._key,a.did=this.cookie.props.uuid,a.cuid=this.cookie.props.cuid,this._sendTrackRequest(a)}else this._stopPing();var b=new Date;return b-this.last_activity>this.config.idle_threshold&&(this.idle=b-this.last_activity),this},r.prototype.getDid=function(){return this.cookie.props.uuid},r.prototype._batchTrack=function(a,b){var c={};c.type="statis",c.sdk="web",c.sdkv=k,c.cn=this.config.app_channel,c.vn=this.config.app_version,c.ak=this._key,c.did=this.cookie.props.uuid,c.cuid=this.cookie.props.cuid,c.ts=1*new Date/1e3,j.cookie.get("responseTimeline")&&(c.lt=parseInt(j.cookie.get("responseTimeline"))),this.config.debug&&(c.debug=1);var d=[];d.push(a),c.data=d,this._sendTrackRequest(c,this._prepareCallback(b,c))},r.prototype._omitPatchTrack=function(a,b,c){var d={};d.type="statis",d.sdk="web",d.sdkv=k,d.cn=this.config.app_channel,d.vn=this.config.app_version,d.ak=this._key,d.did=this.cookie.props.uuid,d.cuid=this.cookie.props.cuid,d.ts=(b?b.getTime():(new Date).getTime())/1e3,j.cookie.get("responseTimeline")&&(d.lt=parseInt(j.cookie.get("responseTimeline"))),this.config.debug&&(d.debug=1);var e=[];e.push(a),d.data=e,this._sendTrackRequest(d,this._prepareCallback(c,d))},r.prototype._prepareCallback=function(a,b){if(j.isUndefined(a))return null;if(m){var c=function(c){a(c,b)};return c}var d=this._jsc,e=""+Math.floor(1e8*Math.random()),f='zhuge_jsc["'+e+'"]';return d[e]=function(c){delete d[e],a(c,b)},f},r.prototype._sendTrackRequest=function(a,b){var c=j.truncate(a,255),d=j.JSONEncode(c);data={event:d,_:(new Date).getTime().toString()};var e=this.config.api_host+"&"+j.HTTPBuildQuery(data);this._sendRequest(e,b)},r.prototype._sendRequest=function(a,b){var c=(new Date).getTime();if(m){var d=new XMLHttpRequest;d.open("GET",a,!0),d.withCredentials=!0,d.onreadystatechange=function(a){if(4===d.readyState){if(200!==d.status){var e="Bad HTTP status: "+d.status+" "+d.statusText;p.error(e)}j.cookie.set("responseTimeline",(new Date).getTime()-c),b&&b(d.status)}},d.send(null)}else{var e=h.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src=a,e.onload=function(){j.cookie.set("responseTimeline",(new Date).getTime()-c)};var f=h.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)}},r.prototype.push=function(a){var b=a.shift();this[b]&&this[b].apply(this,a)},r.prototype.getKey=function(){return this._key};for(var s=window.zhuge||[],t=new r;s&&s.length>0;){var u=s.shift(),v=u.shift();t[v]&&t[v].apply(t,u)}window.zhuge=t}();!function(){function a(a){this.origin=a,this.length=a.length;for(var b=0;b<a.length;b++)this[b]=a[b]}function b(a){this.origin=a}function c(){var a=m.customReplace("appkey",zhuge.getKey()).customReplace("plat",3);d.ajax({url:a,type:"get",data:{event_url:location.pathname},success:function(a){n=!0,window.zhugeEventsData=[];for(var b=0;b<a.event_infos.length;b++){var c=a.event_infos[b],e=JSON.parse(c.eventJson);window.zhugeEventsData.push(e)}localStorage&&localStorage.setItem("zhuge_event_list"+location.pathname,JSON.stringify(window.zhugeEventsData));for(var b=0;b<o.length;b++)for(var f=o[b],g=0;g<window.zhugeEventsData.length;g++)for(var h=window.zhugeEventsData[g],i=0;i<l.query(h.selector).length;i++){var j=l.query(h.selector)[i];if(d.log("查询页面dom：",j),d.getType(j)==d.getType(l)&&(j=j.origin),j==f.element){d.log("需要打点：",h);try{zhuge.track(h.event_name,{},null,f.time)}catch(k){d.log("遗漏事件上传失败：",k)}}}o=[]},error:function(a){}})}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}),String.prototype.customReplace=function(a,b,c){a=a.toString();var d=!c||"g"!=c&&"i"!=c&&"m"!=c?new RegExp("\\${"+a+"}"):new RegExp("\\${"+a+"}",c),e=this.toString().replace(d,b);return e},String.prototype.xssEncode=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;")};var d={isObject:function(a){return"[object Object]"==Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},getType:function(a){if(void 0===a)return"undefined";if(null===a)return"null";var b=Object.prototype.toString.call(a).match(/[A-Z][a-zA-Z]*/)[0],c=a.constructor.name;try{var d=a.constructor.toString().match(/[fF]unction (\S+)\(/)[1]}catch(e){var d=a.constructor.name}return"object"==b.toLowerCase()?c||d:b},getWheelEventName:function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},getHrefData:function(){for(var a=decodeURIComponent(location.search).replace(/\?/,"").split("&"),b={},c=0;c<a.length;c++)b[a[c].split("=")[0]]=a[c].split("=")[1];return b},log:function(){if(window.console&&window.openLog){var a=[],b=null;for(b in arguments)a.push(arguments[b]);console.info.apply(console,a)}},clone:function(a){if(this.isArray(a)){for(var b=[],c=0;c<a.length;c++)b.push(this.clone(a[c]));return b}if(!this.isObject(a))return a;if(null==a)return a;var d=new Object;for(var c in a)d[c]=this.clone(a[c]);return d},mergeObject:function(a,b){for(var c in a)this.isObject(a[c])?(b[c]=b[c]?b[c]:{},this.mergeObject(a[c],b[c])):this.isArray(a[c])?b[c]=this.isArray(b[c])?b[c]:a[c]:b[c]=null===b[c]||void 0===b[c]?a[c]:b[c];return this.clone(b)},getXhrObj:function(){var a;return a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},serializeParam:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent("String"!=this.getType(a[c])?JSON.stringify(a[c]):a[c]));return b.join("&")},cookieUtil:{get:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return null},set:function(a,b,c,d,e){var f="",g="",h="";if(d){var i=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),j=i?i[0]:"";f=j?"; domain=."+j:""}if(c){var k=new Date;k.setTime(k.getTime()+24*c*60*60*1e3),g="; expires="+k.toGMTString()}e&&(h="; secure"),document.cookie=a+"="+encodeURIComponent(b)+g+"; path=/"+f+h}},ajax:function(a){var b={url:"",type:"POST",data:{},username:"",password:"",success:function(){},error:function(){}},c=this.mergeObject(b,a),e=this.getXhrObj();try{switch(e.onreadystatechange=function(){if(e.readyState==XMLHttpRequest.DONE)if(e.status>=200&&e.status<=299)try{c.success.call(e,JSON.parse(e.responseText))}catch(a){c.success.call(e,e.responseText)}else c.error.call(e)},e.onerror=c.error,c.type){case"get":c.url+=this.serializeParam(c.data)?"?"+this.serializeParam(c.data):"",e.open(c.type,c.url,!0),e.send();break;case"delete":c.url+=this.serializeParam(c.data)?"?"+this.serializeParam(c.data):"",e.open(c.type,c.url,!0),e.send();break;case"post":e.open(c.type,c.url,!0);var f=this.serializeParam(c.data);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(f)}return e}catch(g){d.log("请求发送失败：",c);var h=document.createElement("script");h.type="text/javascript",h.async=!0,h.defer=!0,h.src=c.url,h.onload=function(){};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(h,i)}}},e=d.getType(new b(document)),f=d.getType(new a([]));a.prototype.each=function(a){var c=this.origin?this.origin.length:0,f=0;for(f=0;c>f;f++)this.origin[f]&&a.call(d.getType(this.origin[f])==e?this.origin[f]:new b(this.origin[f]),f)},a.prototype.getByIndex=function(b){var c=this.origin[b];return d.getType(c)==f?c:new a([c])};var g={getBody:function(){return new b(document.body)},getHead:function(){return new b(document.querySelector("head"))},wrap:function(a){return d.getType(a)!=e?new b(a):a},getClientRect:function(){var a=this.origin.getBoundingClientRect(),b={};for(var c in a)b[c]=a[c];return b},getAbsolutePosition:function(a){return a?(a.top+=this.origin.offsetTop,a.left+=this.origin.offsetLeft):a={width:this.origin.offsetWidth,height:this.origin.offsetHeight,top:this.origin.offsetTop,left:this.origin.offsetLeft},this.origin.offsetParent?this.wrap(this.origin.offsetParent).getAbsolutePosition(a):a},getNodeName:function(){return this.origin.nodeName.toLowerCase()},append:function(a){return"String"==d.getType(a)?this.origin.insertAdjacentHTML("afterbegin",a):(a=d.getType(a)==e?a.origin:a,this.origin.appendChild(a)),this},empty:function(){var a=0,b=this.origin.childNodes.length;for(a;b>a;a++)this.origin.removeChild(this.origin.childNodes[0]);return this},find:function(a){var c=this.origin.querySelector(a);return c?new b(c):null},query:function(b){var c=b.match(/:eq\(\d+\)/g);if(c){for(var d=b.split(/:eq\(\d+\)/),e=null,f=0;f<d.length;f++){var g=d[f];if(/^>/.test(g)&&(g=g.replace(/^>/,"")),e)if(f<d.length-1)e=e.query(g).getByIndex(c[f].match(/\d+/)[0]);else{if(!g)return e;e=e.query(g)}else e=this.query(g).getByIndex(c[f].match(/\d+/)[0])}return e}return new a(this.origin.querySelectorAll(b))},siblings:function(b){b=b||this.getSelector();var c=this.parent().query(b),d=[],e=this;return c.each(function(){this.is(e)||d.push(this)}),new a(d)},remove:function(){return this.origin.parentNode.removeChild(this.origin),this},contains:function(a){return a=d.getType(a)==e?a.toString():a instanceof HTMLElement?new b(a).toString():a.toString(),this.toString().indexOf(a)>-1?!0:!1},toString:function(){var a=document.createElement("div");return a.appendChild(this.origin.cloneNode(!0)),a.innerHTML},html:function(a){var c=document.createElement("div");c.innerHTML=a;for(var d=0;d<c.childNodes.length;d++)this.append(new b(c.childNodes[d]));return this},bind:function(a,b,c){var d=this.origin,e=this;return d.addEventListener?d.addEventListener(a,function(a){b.call(e,a||window.event)},c||!1):this.attachEvent?d.attachEvent("on"+a,function(a){b.call(e,a||window.event)}):d["on"+a]=function(a){b.call(e,a||window.event)},this},unbind:function(a,b,c){var d=this.origin,e=this;return d.removeEventListener?d.removeEventListener(a,function(a){b.call(e,a||window.event)},c||!1):d.detachEvent?d.detachEvent("on"+a,b):d["on"+a]=null,this},click:function(a){var b=this;return this.bind("click",function(c){a.call(b,c||window.event)}),this},attr:function(a,b){return void 0!==b?(this.origin.setAttribute(a,b),this):this.origin.getAttribute(a)},addClass:function(a){a=a.toString().toLowerCase();var b=this.attr("class")?this.attr("class").replace(/\s{0,}/," "):"",c=new RegExp("\\b"+a+"\\b");return b=b.replace(c,""),this.attr("class",(b+" "+a).trim().replace(/\s{1,}/g," ")),this},removeClass:function(a){var b=new RegExp("\\b("+a+")\\b","g");if(a=a.toString().toLowerCase(),!this.attr("class"))return this;var c=this.attr("class").replace(/\s{1,}/g," "),b=new RegExp("\\b("+a+")\\b","g");return this.attr("class",c.replace(b,"").trim()),this},css:function(a,b){if(d.isObject(a)||b){if(!d.isObject(a)){var c={};c[a]=b,a=c}for(var e in a){var f="";/\D/.test(a[e])&&(1!=a[e].toString().match(/\D/g).length||"."!=a[e].toString().match(/\D/g)[0])||"zindex"==e.toString().toLowerCase()||(f="px");for(var g=e.match(/[A-Z]/g),h=e.split(/[A-Z]/)[0],i=0;g&&i<g.length;i++)h+="-"+g[i].toLowerCase()+e.split(/[A-Z]/)[i+1];this.origin.style[h]=a[e]+f}return this}return window.getComputedStyle(this.origin)[a]},show:function(){this.css("display","block")},hide:function(){this.css("display","none")},focus:function(){var a=0,b=document.body;return document.documentElement&&document.documentElement.scrollTop?(a=document.documentElement.scrollTop,b=document.documentElement):document.body&&(a=document.body.scrollTop),this.origin.tabIndex=-1,this.origin.focus(),b.scrollTop=a,this},text:function(a){return a?(this.origin.innerHTML=a.xssEncode(),this):this.origin.innerHTML.toString().replace(/(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))/g,"").trim()},is:function(a){try{if(d.getType(a)==e)return this.toString()==a.toString();if(a instanceof HTMLElement)return this.toString()==new b(a).toString();var c=document.createDocumentFragment();return c.appendChild(this.origin.cloneNode(!1)),c.querySelector(a)?!0:!1}catch(f){return!1}},val:function(a){return null!=a&&void 0!=a?(this.origin.value=a,this):this.origin.value},check:function(a){return null==a||void 0==a?this.origin.checked:void(this.origin.checked=a?!0:!1)},parent:function(){var a=this.origin.parentNode;return this.wrap(a)},parents:function(a){return this.parent().is(a)?this.parent():this.parent().parents(a)},childs:function(a){return this.query(a?a:"*")},indexOfParent:function(a){for(var b=this.origin,c=0,d=0;d<b.parentNode.childNodes.length;d++){var e=b.parentNode.childNodes[d];if(e==b)return c;try{this.wrap(e).getSelector()==this.wrap(b).getSelector()&&c++}catch(f){}}return c},getSelector:function(a){var b="";if(this.attr("id"))b="#"+this.attr("id");else{var c=this.getNodeName(),d=this.attr("class");d&&(d=d.replace("zhuge_checked_node","").trim().replace(/\s+/g," ").trim().split(/\s{1}/).join(".")),d=d?"."+d:"",b=c+d}return b},getUniqueSelector:function(a,b){var c=this.getSelector(!0),d=this.wrap(document);if(d.query(c).length>1){c=c+":eq("+this.indexOfParent()+")";var e=!0}else var e=!1;return a&&(c+=">"+a),!this.is("body")&&e?this.parent().getUniqueSelector(c,b?b:this):c},getSameSelector:function(a,b){var c=this.getSelector(!1),d=this.wrap(document),e=d.query(c).length<2;return a&&(c+=">"+a),e?c:this.parent().getSameSelector(c,b?b:this)},width:function(){return this.origin.clientWidth},height:function(){return this.origin.clientHeight},getImporStyleName:function(a){var b=this.getNodeName(),c=this.attr("class");return c&&c.trim()?(c="."+c.replace(/\s+/g," ").trim().split(/\s{1}/).join("."),a?c+">"+a:c):this.parent().is("body")?a?b+">"+a:b:this.parent().getImporStyleName(a?b+">"+a:b)},getStyle:function(){for(var a=document.querySelectorAll("body *"),b=[],c=0;c<a.length;c++){var e=a[c];if(!this.wrap(e).is("script")){var f=this.wrap(e).getImporStyleName();b.push(f+"{"+window.getComputedStyle(e).cssText+"}")}}d.ajax({url:"http://localhost:3000",type:"post",data:{data:b.join("").replace(/;/g," !important;")},success:function(a){console.log("数据传输成功")}})}};for(var h in g)b.prototype[h]=g[h];for(var i="append,empty,query,remove,bind,unbind,click,show,hide,attr,addClass,removeClass,css,text,is",j=0;j<i.split(",").length;j++){var k=i.split(",")[j];!function(b){a.prototype[b]=function(){var c=Array.prototype.slice.call(arguments),e=[];return this.each(function(){var a=this[b].apply(this,c);d.getType(a)==f?a.each(function(){e.push(this)}):e.push(a)}),new a(e)}}(k)}var l=new b(document),m="https://api.zhugeio.com/v1/events/codeless/appkey/${appkey}/platform/${plat}",n=!1,o=[];if(c(),l.bind("click",function(a){var b=a.target||a.srcElement,c=localStorage?localStorage.getItem("zhuge_event_list"+location.pathname):null;if(!n){if(!c)return void o.push({element:b,time:new Date});try{window.zhugeEventsData=JSON.parse(c),n=!0}catch(e){d.log("缓存处理失败: ",e)}}if(0==window.zhugeEventsDisable||void 0==window.zhugeEventsDisable)for(var f=0;window.zhugeEventsData&&f<window.zhugeEventsData.length;f++){var g=window.zhugeEventsData[f];d.log("事件列表项：",g);for(var h=0;h<l.query(g.selector).length;h++){var i=l.query(g.selector)[h];d.log("查询页面dom：",i),d.getType(i)==d.getType(l)?i.origin==b&&(d.log("需要打点：",g),zhuge.track(g.event_name)):i==b&&(d.log("需要打点：",g),zhuge.track(g.event_name))}}}),"open"==d.getHrefData()["event-visualizer"]||"open"==d.cookieUtil.get("event-visualizer")){var p=document.createElement("script");p.src="https://zhugeio.com/index/userLoginJsonp.jsp?jsonpcallback=callback111&appkey="+zhuge.getKey(),document.head.appendChild(p),window.callback111=function(a){if(a.login&&a.domain==location.host){d.cookieUtil.set("event-visualizer","open"),d.cookieUtil.set("zg_app_id",a.appMain.id),d.cookieUtil.set("zg_app_name",a.appMain.appName);var b=document.createElement("script");b.src="https://zhugeio.com/web/resource/visualizer.js",document.getElementsByTagName("head")[0].appendChild(b)}else console.log("不明身份想要打点！！")}}}();